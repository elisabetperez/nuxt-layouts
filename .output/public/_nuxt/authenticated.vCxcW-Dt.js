import{ac as y,ad as _,D as q,ae as v,af as b,ag as n,q as r}from"./entry.OtO-Wuic.js";const j=y(async(s,w)=>{let e,t;try{const a=_(),p=q(),m=v`*[_type == "page" && isPrivate == true]{'slug' : slug.current}`,g=b(),h=([e,t]=n(()=>g.fetch(m)),e=await e,t(),e),u=([e,t]=n(()=>p.from("Users").select("*").eq("full_access","TRUE")),e=await e,t(),e);var o=!1,f=!1,c=[],d=!1;if(h&&(o=h.some(i=>s.fullPath.includes(`${i.slug}`))),o)if(a.value){if(u.data&&u.data.length>0&&a.value&&!u.data.some(l=>l.user_id===a.value.id)&&s.fullPath!="/join-beta")return r("/join-beta")}else return r("/auth/log-in");else{const i=v`*[_type == "page" && isPrivate != true]{'slug' : slug.current}`;if(c=([e,t]=n(()=>g.fetch(i)),e=await e,t(),e),f=c.some(l=>s.fullPath.includes(`/${l.slug}`)||s.fullPath==="/"),!f&&s.fullPath!="/join-beta")if(u.data&&a.value){if(d=u.data.some(l=>l.user_id===a.value.id),!d)return r("/auth/log-in")}else r("/auth/log-in")}}catch(a){return console.log(a),r("/auth/log-in")}});export{j as default};
